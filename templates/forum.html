{% extends 'base.html' %}

{% block title %}UniConX | Forum{% endblock %}

{% block main %}
<div class="container">
    <h1>Discussion Forum</h1>
    <div id="posts">
        <!-- Posts will be dynamically added here -->
        <h2>Posted Discussions</h2>
        <ul>
            {% for post in posts %}
            <li>
                <strong>{{ post.title }}</strong> by {{ post.email }}<br>
                {{ post.post_date_time }}<br>
                {{ post.content }}
            </li>
            {% endfor %}
        </ul>
    </div>
    <div id="new-post">
        <form method="post" action="{{ url_for('forum') }}">
            <h2>Create a New Post</h2>
            <label for="title">Title: </label>
            <input type="text" name="title" id="post-title" placeholder="Title" required>
            <br>
            <label for="post-content">Post Content: </label>
            <textarea id="post-content" name="content" placeholder="Post Content" required></textarea>
            <br>
            <input type="submit" value="Submit">
        </form>
    </div>
</div>

<script>
    // JavaScript code for handling forum functionality
    const postsContainer = document.getElementById('posts');
    const postTitleInput = document.getElementById('post-title');
    const postContentInput = document.getElementById('post-content');
    const submitButton = document.getElementById('submit-post');

    submitButton.addEventListener('click', () => {
        const title = postTitleInput.value;
        const content = postContentInput.value;

        if (title && content) {
            const postElement = document.createElement('div');
            postElement.classList.add('post');
            postElement.innerHTML = `
                <h3 class="post-title">${title}</h3>
                <p>${content}</p>
            `;
            postsContainer.appendChild(postElement);

            // Clear input fields
            postTitleInput.value = '';
            postContentInput.value = '';
        }
    });
</script>
{% endblock %}